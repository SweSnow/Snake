<!DOCTYPE html>
<html>
<head>

<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<title>Duarte Snake</title>

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">

	<script src="components/platform/platform.js"></script>

	<link rel="import" href="components/font-roboto/roboto.html">

	<link rel="import" href="components/paper-item/paper-item.html">
	<link rel="import" href="components/paper-button/paper-button.html">
	<link rel="import" href="components/paper-icon-button/paper-icon-button.html">
	<link rel="import" href="components/paper-tabs/paper-tabs.html">
	<link rel="import" href="components/paper-dialog/paper-dialog.html">
	<link rel="import" href="components/paper-dialog/paper-dialog-transition.html">

	<link rel="import" href="components/core-header-panel/core-header-panel.html">
	<link rel="import" href="components/core-toolbar/core-toolbar.html">
	<link rel="import" href="components/core-icons/core-icons.html">
	<link rel="import" href="components/core-icons/core-icons.html">

	<link rel="import" href="duarte-components/duarte-header.html">
	<link rel="import" href="duarte-components/duarte-about.html">
	<link rel="import" href="duarte-components/duarte-browse.html">
	<link rel="import" href="duarte-components/duarte-profile.html">
	<link rel="import" href="duarte-components/duarte-game-manager.html">

	<link rel="stylesheet" type="text/css" href="style/main_style.css"/>

</head>

<body unresolved>

	<polymer-element name="duarte-page">
		<template>
			<style>
				.page {
					display: none;
				}
				.page[selected] {
					display: block;
				}

			</style>

			<duarte-header selected="{{selected}}" on-selected="{{onSelect}}" smaller="false"></duarte-header>
			
			<div id="about" class="page">{{1234567891234567 | prettify}}</div>
			<duarte-browse id="browse" class="page"></duarte-browse>
			<duarte-profile id="profile" class="page"></duarte-profile>
			<duarte-game-manager id="create" class="page"></duarte-game-manager>
			
		</template>	


		<script type="text/javascript">
			Polymer('duarte-page', {
				defaultPage: 'about',
				attached: function() {
					this.router();

					var self = this;
					window.addEventListener('popstate', function() {
						self.router.call(self);
					});
				},
				router: function() {
					var page = location.pathname.substring(1);
					this.selected = this.$[page] ? page : this.defaultPage;
				},
				onSelect: function(event) {
					history.pushState(null, null, this.selected);
				},
				selectedChanged: function(oldValue, newValue) {
					if(oldValue) {
						this.$[oldValue].removeAttribute('selected');
					}
					this.$[newValue].setAttribute('selected', '');
				},
				prettify: function(value) {
					return value.toString()
					  .split('').reverse().join('')
					  .replace(/\d{3}(?!$)/g, '$&,')
					  .split('').reverse().join('');
				}
			});
		</script>
	</polymer-element>

	<duarte-page></duarte-page>
</body>
</html>