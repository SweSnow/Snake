<!DOCTYPE html>
<html>
<head>

<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<title>Duarte Snake</title>

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">

	<script src="components/platform/platform.js"></script>
	<script src="components/webcomponentsjs/webcomponents.js"></script>

	<link rel="import" href="components/font-roboto/roboto.html">

	<link rel="import" href="components/paper-item/paper-item.html">
	<link rel="import" href="components/paper-button/paper-button.html">
	<link rel="import" href="components/paper-icon-button/paper-icon-button.html">
	<link rel="import" href="components/paper-tabs/paper-tabs.html">
	<link rel="import" href="components/paper-dialog/paper-dialog.html">
	<link rel="import" href="components/paper-dialog/paper-dialog-transition.html">

	<link rel="import" href="components/core-header-panel/core-header-panel.html">
	<link rel="import" href="components/core-toolbar/core-toolbar.html">
	<link rel="import" href="components/core-icons/core-icons.html">
	<link rel="import" href="components/core-icons/core-icons.html">
	<link rel="import" href="components/core-animated-pages/core-animated-pages.html">

	<link rel="import" href="duarte-components/duarte-header.html">
	<link rel="import" href="duarte-components/duarte-about.html">
	<link rel="import" href="duarte-components/duarte-browse.html">
	<link rel="import" href="duarte-components/duarte-profile.html">
	<link rel="import" href="duarte-components/duarte-game-manager.html">

	<link rel="stylesheet" type="text/css" href="style/main_style.css"/>

</head>

<body unresolved>

	<polymer-element name="duarte-app">
		<template>
			<style>
				.page {
					display: none;
				}
				.page[selected] {
					display: block;
				}

				::selection {
					background-color: #009688;
					color: #fff;
				}

			</style>

			<duarte-header selected="{{selected}}" on-selected="{{onSelect}}" smaller="false" loggedin="false"></duarte-header>
			
			<core-animated-pages id="pages" selected="{{selected}}">
				<duarte-about name="about"></duarte-about>
				<duarte-browse name="browse"></duarte-browse>
				<duarte-profile name="profile"></duarte-profile>
				<duarte-game-manager name="create"></duarte-game-manager>

				<duarte-game name="play"></duarte-game>
			</core-animated-pages>

			
			
		</template>	


		<script type="text/javascript">
			Polymer('duarte-app', {
				defaultPage: 'about',
				attached: function() {
					this.pages = [].map.call(this.$.pages.querySelectorAll('[name]'),
						function(element) {
							return element.getAttribute('name');
						}
					);

					this.router();

					var self = this;
					window.addEventListener('popstate', function() {
						self.router.call(self);
					});
				},
				router: function() {
					var page = location.pathname.substring(1);

					this.selected = this.pages.indexOf(page) === -1 ? this.defaultPage : page;
				},
				onSelect: function(event) {
					history.pushState(null, null, this.selected);
				}/*,
				prettify: function(value) {
					return value.toString()
					  .split('').reverse().join('')
					  .replace(/\d{3}(?!$)/g, '$& ')
					  .split('').reverse().join('');
				}*/
			});
		</script>
	</polymer-element>

	<duarte-app></duarte-app>
</body>
</html>